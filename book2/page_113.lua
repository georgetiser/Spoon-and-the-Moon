-- Code created by Kwik - Copyright: kwiksher.com -- Version: 2.4.6 module(..., package.seeall)  function new() 	local menuGroup = display.newGroup() 	local disposeTweens     local path = system.pathForFile( "SpoonAndTheMoonPart2.txt", system.DocumentsDirectory )     local file = io.open( path, "w+" )     file:write( _G.kwk_currentPage )     io.close( file ) 	local drawScreen = function()		navigation.DisplayDevelopmentVersion()		menuGroup.navigator = navigation.InsertNavigation{}		local staranima1			local CreditsButton		local PreviewButton		if _G.kwk_ShowDebugOutput then			local onDebugButtonTouch = function(event) 				if event.phase=="ended" then						local myClosure_switch = function() 						disposeAudios()						disposeTweens() 						_G.kwk_ShowDebugOutput = nil						_G.kwk_currentPage = _G.kwk_firstPage						director:changeScene( "page_" .. _G.kwk_currentPage, "fade" ) 					end 					timerStash.tempTimer = nil 					timerStash.tempTimer = timer.performWithDelay(0, myClosure_switch, 1) 				end --ended			end--debug-touch			DebugButton = ui.newButton{ 				defaultSrc= imageDir .. "debugbutton.png", 				defaultX = 186, 				defaultY = 186, 				overSrc= imageDir .. "debugbutton.png", 				overX = 186, 				overY = 186, 				onRelease=onDebugButtonTouch, 				id="DebugButtonButton" 			}			DebugButton.x = 600			DebugButton.y = 600			DebugButton.alpha = 1; DebugButton.oldAlpha = 1 			menuGroup:insert(DebugButton) 			menuGroup.DebugButton = DebugButton 		end--if		menuGroup.debugbutton = navigation.InsertAButton{			name = "debug button",			category = "navigation button",			imageFile = imageDir .. "debugbutton.png",			x = 600, y = 600,			width = 186, height = 186,			touchSound = audioDir .. "click.mp3",			customEffect = function() _G.kwk_ShowDebugOutput = 0; end,			destinationPage = _G.kwk_firstPage }		menuGroup.creditsbutton = navigation.InsertAButton{			name = "credits button",			category = "navigation button",			imageFile = imageDir .. "transparentbutton.png",			x = 420, y = 510,			width = 110, height = 25,			alpha = 0.5,			touchSound = audioDir .. "click.mp3",			destinationPage = _G.kwk_creditsPage + 1}		menuGroup.chapter8button = navigation.InsertAButton{			name = "chapter 8 button",			category = "navigation button",			imageFile = imageDir .. "transparentbutton.png",			x = 390, y = 275,			width = 280, height = 25,			touchSound = audioDir .. "click.mp3",			destinationPage = _G.kwk_firstPageOfChapter[8] }		menuGroup.chapter9button = navigation.InsertAButton{			name = "chapter 9 button",			category = "navigation button",			imageFile = imageDir .. "transparentbutton.png",			x = 390, y = 305,			width = 280, height = 25,			touchSound = audioDir .. "click.mp3",			destinationPage = _G.kwk_firstPageOfChapter[9] }		menuGroup.chapter10button = navigation.InsertAButton{			name = "chapter 10 button",			category = "navigation button",			imageFile = imageDir .. "transparentbutton.png",			x = 390, y = 345,			width = 280, height = 40,			touchSound = audioDir .. "click.mp3",			destinationPage = _G.kwk_firstPageOfChapter[10] }		menuGroup.chapter11button = navigation.InsertAButton{			name = "chapter 11 button",			category = "navigation button",			imageFile = imageDir .. "transparentbutton.png",			x = 390, y = 385,			width = 280, height = 25,			touchSound = audioDir .. "click.mp3",			destinationPage = _G.kwk_firstPageOfChapter[11] }		menuGroup.chapter12button = navigation.InsertAButton{			name = "chapter 12 button",			category = "navigation button",			imageFile = imageDir .. "transparentbutton.png",			x = 390, y = 415,			width = 280, height = 25,			touchSound = audioDir .. "click.mp3",			destinationPage = _G.kwk_firstPageOfChapter[12] }		menuGroup.chapter13button = navigation.InsertAButton{			name = "chapter 13 button",			category = "navigation button",			imageFile = imageDir .. "transparentbutton.png",			x = 390, y = 445,			width = 280, height = 25,			touchSound = audioDir .. "click.mp3",			destinationPage = _G.kwk_firstPageOfChapter[13] }		menuGroup.chapter14button = navigation.InsertAButton{			name = "chapter 14 button",			category = "navigation button",			imageFile = imageDir .. "transparentbutton.png",			x = 390, y = 475,			width = 280, height = 25,			touchSound = audioDir .. "click.mp3",			destinationPage = _G.kwk_firstPageOfChapter[14] }		menuGroup.background = add.newObject{			category = "background",			x = 384, y = 512,			width = 768, height = 1024,			imageFile = imageDir .. "Book2_TableOfContents.png" }		staranima1 = display.newImageRect(imageDir .. "staranima1.png", 16, 16 ); 		staranima1.x = -12; staranima1.y = 101; staranima1.alpha = 1; staranima1.oldAlpha = 1 		menuGroup:insert(staranima1) 		menuGroup.staranima1 = staranima1 		--2 		gtStash.gt_staranima1_444= gtween.new( staranima1, 2.5, { x = 871, y = 618, rotation = 0, xScale = 1, yScale = 1, alpha=1}, {ease = gtween.easing.linear, repeatCount = 1, reflect = false,	delay=2}) 	end 	drawScreen() 		function disposeAudios(event)			--nothing to dispose of 		end 	function disposeTweens(event) 		cancelAllTweens(); 		cancelAllTimers(); 		cancelAllTransitions(); 	end 	return menuGroup end 