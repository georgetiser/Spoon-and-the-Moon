-- Code created by Kwik - Copyright: kwiksher.com -- Version: 1.9.7a module(..., package.seeall)  function new()     local numPages = 114     local menuGroup = display.newGroup()     local disposeAudios     local disposeTweens     local curPage = 2     print("The deprecated curPage is:" .. curPage)     print("The current page is: " .. _G.kwk_currentPage)     local path = system.pathForFile( "book.txt", system.DocumentsDirectory )     local file = io.open( path, "w+" )     file:write( curPage )     io.close( file )     local drawScreen = function()        local staranima1         local kwkBback         local kwkBindex         local kwkBforward         local pageN         local chapt1buttoncli         local chapt1button         local chapt2buttoncli         local chapt2button         local chapt3buttoncop         local chapt3button         local chapt4buttoncop         local chapt4button         local chapt5buttoncop         local chapt5button         local chapt6buttoncop         local chapt6button         local chapt7buttoncop         local chapt7button         local chapt8buttoncop         local chapt8button         local chapt9buttoncop         local chapt9button         local chapt10buttonco         local chapt10button         local chapt11buttonco         local chapt11button         local chapt12buttonco         local chapt12button         local chapt13buttonco         local chapt13button         local chapt14buttonco         local chapt14button         local chapt15buttonco         local chapt15button         local chapt16buttonco         local chapt16button         local chapt17buttonco         local chapt17button         local chapt18buttonco         local chapt18button         local chapt19buttonco         local chapt19button         local chapt20buttonco         local chapt20button         local chapt21buttonco         local chapt21button         local layer08126  --(2) regular layer        layer08126 = display.newImageRect( imgDir.. "p2_layer08126.png", 808, 1024 );        layer08126.x = 369; layer08126.y = 512; layer08126.alpha = 1; layer08126.oldAlpha = 1        menuGroup:insert(layer08126)        menuGroup.layer08126 = layer08126        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_735 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt21button = ui.newButton{            defaultSrc=imgDir.."p2_chapt21button.png",            defaultX = 256,            defaultY = 21,            overSrc=imgDir.."p2_chapt21buttonco.png",            overX = 256,            overY = 21,            onRelease=onchapt21buttonTouch,            id="chapt21buttonButton"        }        chapt21button.x = 357; chapt21button.y = 697; chapt21button.alpha = 1; chapt21button.oldAlpha = 1        menuGroup:insert(chapt21button)        menuGroup.chapt21button = chapt21button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_056 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt20button = ui.newButton{            defaultSrc=imgDir.."p2_chapt20button.png",            defaultX = 362,            defaultY = 21,            overSrc=imgDir.."p2_chapt20buttonco.png",            overX = 362,            overY = 21,            onRelease=onchapt20buttonTouch,            id="chapt20buttonButton"        }        chapt20button.x = 410; chapt20button.y = 669; chapt20button.alpha = 1; chapt20button.oldAlpha = 1        menuGroup:insert(chapt20button)        menuGroup.chapt20button = chapt20button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_294 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt19button = ui.newButton{            defaultSrc=imgDir.."p2_chapt19button.png",            defaultX = 285,            defaultY = 20,            overSrc=imgDir.."p2_chapt19buttonco.png",            overX = 285,            overY = 20,            onRelease=onchapt19buttonTouch,            id="chapt19buttonButton"        }        chapt19button.x = 371; chapt19button.y = 641; chapt19button.alpha = 1; chapt19button.oldAlpha = 1        menuGroup:insert(chapt19button)        menuGroup.chapt19button = chapt19button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_570 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt18button = ui.newButton{            defaultSrc=imgDir.."p2_chapt18button.png",            defaultX = 306,            defaultY = 24,            overSrc=imgDir.."p2_chapt18buttonco.png",            overX = 306,            overY = 24,            onRelease=onchapt18buttonTouch,            id="chapt18buttonButton"        }        chapt18button.x = 381; chapt18button.y = 612; chapt18button.alpha = 1; chapt18button.oldAlpha = 1        menuGroup:insert(chapt18button)        menuGroup.chapt18button = chapt18button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_836 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt17button = ui.newButton{            defaultSrc=imgDir.."p2_chapt17button.png",            defaultX = 220,            defaultY = 21,            overSrc=imgDir.."p2_chapt17buttonco.png",            overX = 220,            overY = 21,            onRelease=onchapt17buttonTouch,            id="chapt17buttonButton"        }        chapt17button.x = 338; chapt17button.y = 586; chapt17button.alpha = 1; chapt17button.oldAlpha = 1        menuGroup:insert(chapt17button)        menuGroup.chapt17button = chapt17button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_101 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt16button = ui.newButton{            defaultSrc=imgDir.."p2_chapt16button.png",            defaultX = 200,            defaultY = 20,            overSrc=imgDir.."p2_chapt16buttonco.png",            overX = 200,            overY = 20,            onRelease=onchapt16buttonTouch,            id="chapt16buttonButton"        }        chapt16button.x = 328; chapt16button.y = 557; chapt16button.alpha = 1; chapt16button.oldAlpha = 1        menuGroup:insert(chapt16button)        menuGroup.chapt16button = chapt16button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_350 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt15button = ui.newButton{            defaultSrc=imgDir.."p2_chapt15button.png",            defaultX = 292,            defaultY = 23,            overSrc=imgDir.."p2_chapt15buttonco.png",            overX = 292,            overY = 23,            onRelease=onchapt15buttonTouch,            id="chapt15buttonButton"        }        chapt15button.x = 374; chapt15button.y = 529; chapt15button.alpha = 1; chapt15button.oldAlpha = 1        menuGroup:insert(chapt15button)        menuGroup.chapt15button = chapt15button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_600 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt14button = ui.newButton{            defaultSrc=imgDir.."p2_chapt14button.png",            defaultX = 304,            defaultY = 22,            overSrc=imgDir.."p2_chapt14buttonco.png",            overX = 304,            overY = 22,            onRelease=onchapt14buttonTouch,            id="chapt14buttonButton"        }        chapt14button.x = 380; chapt14button.y = 501; chapt14button.alpha = 1; chapt14button.oldAlpha = 1        menuGroup:insert(chapt14button)        menuGroup.chapt14button = chapt14button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_848 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt13button = ui.newButton{            defaultSrc=imgDir.."p2_chapt13button.png",            defaultX = 270,            defaultY = 26,            overSrc=imgDir.."p2_chapt13buttonco.png",            overX = 270,            overY = 26,            onRelease=onchapt13buttonTouch,            id="chapt13buttonButton"        }        chapt13button.x = 363; chapt13button.y = 474; chapt13button.alpha = 1; chapt13button.oldAlpha = 1        menuGroup:insert(chapt13button)        menuGroup.chapt13button = chapt13button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_097 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt12button = ui.newButton{            defaultSrc=imgDir.."p2_chapt12button.png",            defaultX = 298,            defaultY = 26,            overSrc=imgDir.."p2_chapt12buttonco.png",            overX = 298,            overY = 26,            onRelease=onchapt12buttonTouch,            id="chapt12buttonButton"        }        chapt12button.x = 377; chapt12button.y = 447; chapt12button.alpha = 1; chapt12button.oldAlpha = 1        menuGroup:insert(chapt12button)        menuGroup.chapt12button = chapt12button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_347 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt11button = ui.newButton{            defaultSrc=imgDir.."p2_chapt11button.png",            defaultX = 289,            defaultY = 25,            overSrc=imgDir.."p2_chapt11buttonco.png",            overX = 289,            overY = 25,            onRelease=onchapt11buttonTouch,            id="chapt11buttonButton"        }        chapt11button.x = 372; chapt11button.y = 416; chapt11button.alpha = 1; chapt11button.oldAlpha = 1        menuGroup:insert(chapt11button)        menuGroup.chapt11button = chapt11button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_617 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt10button = ui.newButton{            defaultSrc=imgDir.."p2_chapt10button.png",            defaultX = 443,            defaultY = 26,            overSrc=imgDir.."p2_chapt10buttonco.png",            overX = 443,            overY = 26,            onRelease=onchapt10buttonTouch,            id="chapt10buttonButton"        }        chapt10button.x = 449; chapt10button.y = 389; chapt10button.alpha = 1; chapt10button.oldAlpha = 1        menuGroup:insert(chapt10button)        menuGroup.chapt10button = chapt10button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_805 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt9button = ui.newButton{            defaultSrc=imgDir.."p2_chapt9button.png",            defaultX = 199,            defaultY = 24,            overSrc=imgDir.."p2_chapt9buttoncop.png",            overX = 199,            overY = 24,            onRelease=onchapt9buttonTouch,            id="chapt9buttonButton"        }        chapt9button.x = 327; chapt9button.y = 361; chapt9button.alpha = 1; chapt9button.oldAlpha = 1        menuGroup:insert(chapt9button)        menuGroup.chapt9button = chapt9button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_052 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt8button = ui.newButton{            defaultSrc=imgDir.."p2_chapt8button.png",            defaultX = 270,            defaultY = 22,            overSrc=imgDir.."p2_chapt8buttoncop.png",            overX = 270,            overY = 22,            onRelease=onchapt8buttonTouch,            id="chapt8buttonButton"        }        chapt8button.x = 363; chapt8button.y = 333; chapt8button.alpha = 1; chapt8button.oldAlpha = 1        menuGroup:insert(chapt8button)        menuGroup.chapt8button = chapt8button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_259 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt7button = ui.newButton{            defaultSrc=imgDir.."p2_chapt7button.png",            defaultX = 240,            defaultY = 26,            overSrc=imgDir.."p2_chapt7buttoncop.png",            overX = 240,            overY = 26,            onRelease=onchapt7buttonTouch,            id="chapt7buttonButton"        }        chapt7button.x = 348; chapt7button.y = 306; chapt7button.alpha = 1; chapt7button.oldAlpha = 1        menuGroup:insert(chapt7button)        menuGroup.chapt7button = chapt7button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_536 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt6button = ui.newButton{            defaultSrc=imgDir.."p2_chapt6button.png",            defaultX = 250,            defaultY = 24,            overSrc=imgDir.."p2_chapt6buttoncop.png",            overX = 250,            overY = 24,            onRelease=onchapt6buttonTouch,            id="chapt6buttonButton"        }        chapt6button.x = 353; chapt6button.y = 278; chapt6button.alpha = 1; chapt6button.oldAlpha = 1        menuGroup:insert(chapt6button)        menuGroup.chapt6button = chapt6button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_776 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt5button = ui.newButton{            defaultSrc=imgDir.."p2_chapt5button.png",            defaultX = 217,            defaultY = 23,            overSrc=imgDir.."p2_chapt5buttoncop.png",            overX = 217,            overY = 23,            onRelease=onchapt5buttonTouch,            id="chapt5buttonButton"        }        chapt5button.x = 336; chapt5button.y = 248; chapt5button.alpha = 1; chapt5button.oldAlpha = 1        menuGroup:insert(chapt5button)        menuGroup.chapt5button = chapt5button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_990 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt4button = ui.newButton{            defaultSrc=imgDir.."p2_chapt4button.png",            defaultX = 261,            defaultY = 27,            overSrc=imgDir.."p2_chapt4buttoncop.png",            overX = 261,            overY = 27,            onRelease=onchapt4buttonTouch,            id="chapt4buttonButton"        }        chapt4button.x = 358; chapt4button.y = 220; chapt4button.alpha = 1; chapt4button.oldAlpha = 1        menuGroup:insert(chapt4button)        menuGroup.chapt4button = chapt4button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_268 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt3button = ui.newButton{            defaultSrc=imgDir.."p2_chapt3button.png",            defaultX = 229,            defaultY = 27,            overSrc=imgDir.."p2_chapt3buttoncop.png",            overX = 229,            overY = 27,            onRelease=onchapt3buttonTouch,            id="chapt3buttonButton"        }        chapt3button.x = 342; chapt3button.y = 191; chapt3button.alpha = 1; chapt3button.oldAlpha = 1        menuGroup:insert(chapt3button)        menuGroup.chapt3button = chapt3button        local onchapt(d+)buttonTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("Go to Chapter " .. _G.kwk_firstPageOfChapter[$1])                _G.kwk_currentPage = _G.kwk_firstPageOfChapter[$1]                director:changeScene( "page_" .. _G.kwk_firstPageOfChapter[$1], "moveFromRight" )             end             timerStash.newTimer_448 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt2button = ui.newButton{            defaultSrc=imgDir.."p2_chapt2button.png",            defaultX = 261,            defaultY = 24,            overSrc=imgDir.."p2_chapt2buttoncli.png",            overX = 261,            overY = 24,            onRelease=onchapt2buttonTouch,            id="chapt2buttonButton"        }        chapt2button.x = 358; chapt2button.y = 165; chapt2button.alpha = 1; chapt2button.oldAlpha = 1        menuGroup:insert(chapt2button)        menuGroup.chapt2button = chapt2button        local onchapt1buttonTouch = function(event)           if event.phase=="ended" then           -- This plays the interstitial intro movie if they click Chapter 1.         media.playVideo( videoDir.."book1_intro_movie.mp4", system.ResourceDirectory, false )             local myClosure_switch = function()                 disposeTweens()                 print("GoForward!")                _G.kwk_currentPage = _G.kwk_currentPage+1                director:changeScene( "page_" .. _G.kwk_currentPage, "moveFromRight" )             end             timerStash.newTimer_778 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        chapt1button = ui.newButton{            defaultSrc=imgDir.."p2_chapt1button.png",            defaultX = 202,            defaultY = 29,            overSrc=imgDir.."p2_chapt1buttoncli.png",            overX = 202,            overY = 29,            onRelease=onchapt1buttonTouch,            id="chapt1buttonButton"        }        chapt1button.x = 329; chapt1button.y = 135; chapt1button.alpha = 1; chapt1button.oldAlpha = 1        menuGroup:insert(chapt1button)        menuGroup.chapt1button = chapt1button        local onpageNTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 _G.kwk_currentPage = 2                print("GoToMenu!")                director:changeScene( "page_2", "fade" )            end             timerStash.newTimer_014 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        pageN = ui.newButton{            defaultSrc=imgDir.."p2_pagen.png",            defaultX = 72,            defaultY = 81,            overSrc=imgDir.."p2_pagen.png",            overX = 72,            overY = 81,            onRelease=onpageNTouch,            id="pageNButton"        }        pageN.x = 732; pageN.y = 983; pageN.alpha = 1; pageN.oldAlpha = 1        menuGroup:insert(pageN)        menuGroup.pageN = pageN        local onkwkBforwardTouch = function(event)           if event.phase=="ended" then              local myClosure_switch = function()                 disposeTweens()                 print("GoForward!")                _G.kwk_currentPage = _G.kwk_currentPage+1                director:changeScene( "page_" .. _G.kwk_currentPage, "moveFromRight" )             end             timerStash.newTimer_106 = timer.performWithDelay(0, myClosure_switch, 1)          -- This plays the interstitial intro movie if they click Next Page.         media.playVideo( videoDir.."p2_intro_movie.mp4", system.ResourceDirectory, false )           end        end --(10) regular layer        kwkBforward = ui.newButton{            defaultSrc=imgDir.."kwkbforward.png",            defaultX = 111,            defaultY = 87,            overSrc=imgDir.."kwkbforward.png",            overX = 111,            overY = 87,            onRelease=onkwkBforwardTouch,            id="kwkBforwardButton"        }        kwkBforward.x = 475; kwkBforward.y = 975; kwkBforward.alpha = 1; kwkBforward.oldAlpha = 1        menuGroup:insert(kwkBforward)        menuGroup.kwkBforward = kwkBforward --(2) regular layer        kwkBindex = display.newImageRect( imgDir.. "kwkbindex.png", 66, 69 );        kwkBindex.x = 383; kwkBindex.y = 969; kwkBindex.alpha = 1; kwkBindex.oldAlpha = 1        menuGroup:insert(kwkBindex)        menuGroup.kwkBindex = kwkBindex        local onkwkBbackTouch = function(event)           if event.phase=="ended" then            local myClosure_switch = function()                 disposeTweens()                 print("GoBack!")                _G.kwk_currentPage = _G.kwk_currentPage - 1                director:changeScene( "page_" .. _G.kwk_currentPage, "moveFromLeft" )             end             timerStash.newTimer_330 = timer.performWithDelay(0, myClosure_switch, 1)           end        end --(10) regular layer        kwkBback = ui.newButton{            defaultSrc=imgDir.."kwkbback.png",            defaultX = 111,            defaultY = 88,            overSrc=imgDir.."kwkbback.png",            overX = 111,            overY = 88,            onRelease=onkwkBbackTouch,            id="kwkBbackButton"        }        kwkBback.x = 293; kwkBback.y = 973; kwkBback.alpha = 1; kwkBback.oldAlpha = 1        menuGroup:insert(kwkBback)        menuGroup.kwkBback = kwkBback --(2) regular layer        staranima1 = display.newImageRect( imgDir.. "p2_staranima1.png", 16, 16 );        staranima1.x = -12; staranima1.y = 101; staranima1.alpha = 1; staranima1.oldAlpha = 1        menuGroup:insert(staranima1)        menuGroup.staranima1 = staranima1        --2        gtStash.gt_staranima1_444= gtween.new( staranima1, 2.5, { x = 871, y = 618, rotation = 0, xScale = 1, yScale = 1, alpha=1}, {ease = gtween.easing.linear, repeatCount = 1, reflect = false,  delay=2})        local function flip (event)           local spacer = 180            if event.phase =="ended" then               if event.xStart < event.x and (event.x - event.xStart) >= spacer then                 if (curPage > 1) then                      disposeTweens()                     director:changeScene( "page_"..curPage-1, "moveFromLeft" )                 end              elseif event.xStart > event.x and (event.xStart-event.x) >= spacer then                  if (curPage < numPages) then                      disposeTweens()                     director:changeScene("page_"..curPage+1, "moveFromRight")                 end              end           end        end        layer08126:addEventListener("touch", flip)    end    drawScreen()    function disposeTweens(event)       cancelAllTweens();       cancelAllTimers();       cancelAllTransitions();    end    return menuGroup end 